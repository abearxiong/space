{"version":3,"sources":["webpack://space/./src/pages/user/login_callback/LoginCallback.tsx"],"names":["LoginCallback","userStore","history","postCode","client_id","location","href","match","client_id_local","a","proxyUrl","auto","then","res","token","getToken","setToken","push","window","onClick"],"mappings":"kMAOMA,GAAgB,SAAS,WAAK,IAC1BC,GAAc,SAAdA,UACFC,GAAU,UAIhB,SAASC,IACP,IAAIC,EAEFA,EADEC,SAASC,KAAKC,MAAM,aACVN,EAAUO,gBAEVP,EAAUG,UAExB,IAAMK,GAAI,OAAY,CACpBC,SAAU,oCAEVN,cAEFK,EAAEE,OAAOC,MAAK,SAACC,GACb,IAAMC,EAAQL,EAAEM,WACZD,IACFb,EAAUe,SAASF,GACnBZ,EAAQe,KAAK,SAMnB,OAzBA,QAAS,WACPd,OAuBFe,OAAOf,SAAWA,EAEhB,2BACE,qBAAGgB,QAAShB,GAAQ,uBAK1B","file":"scripts/610.2133a.bundule.js","sourcesContent":["import { useStores } from '@/hooks/user-stores';\nimport { useMount } from 'ahooks';\nimport { observer } from 'mobx-react';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { GithubToken } from 'think-space-oauth';\n\nconst LoginCallback = observer(() => {\n  const { userStore } = useStores();\n  const history = useHistory();\n  useMount(() => {\n    postCode();\n  });\n  function postCode() {\n    let client_id;\n    if (location.href.match(/localhost/)) {\n      client_id = userStore.client_id_local;\n    } else {\n      client_id = userStore.client_id;\n    }\n    const a = GithubToken({\n      proxyUrl: 'http://message.xiongxiao.me/cors/',\n      // useQueryUrl: true,\n      client_id,\n    });\n    a.auto().then((res) => {\n      const token = a.getToken();\n      if (token) {\n        userStore.setToken(token);\n        history.push('/');\n      }\n    });\n  }\n\n  window.postCode = postCode;\n  return (\n    <div>\n      <a onClick={postCode}>若没有自动跳转，请手动点击登录</a>\n    </div>\n  );\n});\n\nexport default LoginCallback;\n"],"sourceRoot":""}