{"version":3,"sources":["webpack://space/./src/pages/home/Home.scss?2931","webpack://space/./src/api/request.ts","webpack://space/./src/pages/home/components/space-list/SpaceList.scss?5ee6","webpack://space/./src/pages/home/components/space-list/SpaceList.tsx","webpack://space/./src/api/github.ts","webpack://space/./src/pages/home/Home.tsx","webpack://space/./src/pages/home/Home.scss","webpack://space/./src/pages/home/components/space-list/SpaceList.scss"],"names":["options","baseURL","instance","headers","timeout","url","window","location","href","interceptors","request","use","config","token","error","message","msg","Promise","reject","response","data","code","isNaN","status","useThrottle","wait","errCode","issues","repository","owner","name","history","className","itemLayout","dataSource","split","renderItem","item","index","v","node","toGithubComment","open","Footer","love","onClick","number","alias","class","reactions","totalCount","reviews","e","comments","title","labelTags","labels","edges","map","key","id","color","description","More","style","display","toGithubIssues","push","width","bordered","extra","actions","dangerouslySetInnerHTML","__html","bodyHTML","userStore","issuesStore","useMount","addEventListener","onScrollNew","getPageData","scrollHeight","document","documentElement","scrollTop","clientHeight","loading","getNewPage","getNextPage","pageData","userRepository","___CSS_LOADER_EXPORT___","module","locals"],"mappings":"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","file":"scripts/317.de424.bundule.js","sourcesContent":["import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[2]!./Home.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import axios, { AxiosRequestConfig } from 'axios';\n\nimport { message } from 'antd';\nimport { useThrottle } from 'ahooks';\n\n// const env = process.env.ENV ?? 'development';\n// export const isMock = !!process?.env?.MOCK;\nconst isMock = false;\nconst baseURL = isMock ? '' : '/api';\n\n// console.log('isMock', isMock, process?.env?.MOCK, 'process', process?.env);\nexport const baseURlMerge = (url: string) => {\n  return baseURL + url;\n};\nconst headers: any = {\n  'Content-Type': 'application/json',\n};\n\nconst instance = axios.create({\n  headers,\n  timeout: 0,\n  baseURL,\n});\nconst history = {\n  push: (url: string) => {\n    window.location.href = url;\n  },\n};\ninstance.interceptors.request.use(\n  (config) => {\n    const headers = config.headers;\n    // 添加 token 请求头\n    const token = 'getUserinfo().token';\n    token && (headers['Authorization'] = token);\n\n    return config;\n  },\n  (error) => {\n    console.groupCollapsed('request error');\n    console.error(error);\n    console.groupEnd();\n    message.error(error.msg || '请求错误,请重试');\n    return Promise.reject(error);\n  },\n);\ninstance.interceptors.response.use(\n  (response) => {\n    const {\n      config: { url },\n    } = response;\n    const { data } = response;\n    console.groupCollapsed(`res: ${url}`);\n    console.error('data', data);\n    console.groupEnd();\n    //没有code或code错误\n    if (data.code !== 0 && data.code !== 1) {\n      if (data.code) {\n        message.error(data.msg || '服务端错误,请重试');\n        throw data.code;\n      }\n    }\n    return data;\n  },\n  (error) => {\n    if (!isNaN(error)) {\n      Promise.reject(error);\n    }\n    console.groupCollapsed('response error');\n    console.log(error);\n    const { response } = error;\n    console.log('response', response);\n\n    if (response?.status == 401) {\n      message.error('请重新登录！');\n      useThrottle(\n        () => {\n          history.push('/login');\n        },\n        { wait: 300 },\n      );\n    } else if (response?.status === 403) {\n      message.error('没有权限,禁止请求');\n    } else {\n      message.error(error.msg || '网络错误,请稍后再试');\n    }\n    console.groupEnd();\n    const errCode = response?.status;\n    return Promise.reject(errCode);\n  },\n);\n\nexport { instance };\n\n// 浏览器请求错误，可能是服务器或者404，让react开发不报错\nconst errBrowerCode = [403, 404, 500];\n// 错误抓取\nconst errHandle = (code: number | string) => {\n  // console.log('err-code', code);\n  // throw code;\n  if (typeof code === 'string') {\n    const s: any = code;\n    if (isNaN(s)) {\n      throw code;\n    }\n  }\n  const c = Number(code);\n  const isErrBrower = errBrowerCode.includes(c);\n  if (!isErrBrower) {\n    throw c;\n  }\n  return;\n};\n// 因为很多内容都是通用，数据请求一般都是类似的形式，进行对应处理化，减少重复代码\nconst get = (url: string, requestConfig: AxiosRequestConfig | any = {}) =>\n  instance.get(url, { ...requestConfig }).catch((err) => errHandle(err));\nconst post = (url: string, requestConfig: AxiosRequestConfig | any = {}) =>\n  instance.post(url, { ...requestConfig }).catch((err) => errHandle(err));\nconst deleteApi = (url: string, requestConfig: AxiosRequestConfig | any = {}) =>\n  instance.delete(url, { ...requestConfig }).catch((err) => errHandle(err));\nconst put = (url: string, requestConfig: AxiosRequestConfig | any = {}) =>\n  instance.put(url, { ...requestConfig }).catch((err) => errHandle(err));\nexport { baseURL, get, post, deleteApi, put };\n","import api from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[2]!./SpaceList.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { toGithubIssues } from '@/api';\nimport { UserRepository } from '@/stores';\nimport { Card, List, Tag } from 'antd';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Styles from './SpaceList.scss';\n// import GEmojiElement from '@github/g-emoji-element';\ntype Props = {\n  issues?: any;\n  repository: UserRepository;\n};\nexport const SpaceList = ({ issues, repository: { owner, name } }: Props) => {\n  const history = useHistory();\n  console.groupCollapsed('spaceList');\n  console.log('issues', issues);\n  console.groupEnd();\n  const SpaceListItem = (item: any, index: number) => {\n    const v = item.node;\n    const toGithubComment = (v?: any) => {\n      const url = `https://github.com/${owner}/${name}/issues/${v}`;\n      window.open(url);\n    };\n    const Footer = () => {\n      const love = (\n        <div onClick={() => toGithubComment(item.node.number)}>\n          <g-emoji\n            alias='heart'\n            fallback-src='https://github.githubassets.com/images/icons/emoji/unicode/2764.png'\n            class='emoji mr-1'\n          >\n            ❤️\n          </g-emoji>\n          {item.node.reactions.totalCount}\n        </div>\n      );\n      const reviews = (\n        <div onClick={(e) => toGithubComment(item.node.number)}>\n          <g-emoji\n            class='g-emoji'\n            alias='speech_balloon'\n            fallback-src='https://github.githubassets.com/images/icons/emoji/unicode/1f4ac.png'\n          >\n            💬\n          </g-emoji>\n          {item.node.comments.totalCount}\n        </div>\n      );\n      return (\n        <div className={Styles.Footer} title='默认转到gituhub issues'>\n          {love} {reviews}\n        </div>\n      );\n    };\n    const labels = v.labels.edges ?? [];\n    const labelTags = labels.map((item: any, index: number) => {\n      const v = item.node;\n      return (\n        <Tag key={v.id} color={`#${v.color}`} title={v.description}>\n          {v.name}\n        </Tag>\n      );\n    });\n    const More = (\n      <div className={Styles.CardMore} style={{ display: 'flex' }}>\n        <a\n          onClick={() => {\n            const url = toGithubIssues({\n              owner,\n              name,\n              index: item.node.number,\n            });\n            window.open(url);\n          }}\n        >\n          More\n        </a>\n        <a\n          onClick={() => history.push(`/edit/new`, { index: item.node.number })}\n        >\n          Edit\n        </a>\n      </div>\n    );\n    return (\n      <List.Item>\n        <Card\n          className={Styles.SpaceCard}\n          style={{ width: '100%' }}\n          bordered={true}\n          title={v.title}\n          extra={More}\n          actions={[<Footer key={v.id} />]}\n        >\n          <div>{labelTags}</div>\n          <div dangerouslySetInnerHTML={{ __html: v.bodyHTML }}></div>\n        </Card>\n      </List.Item>\n    );\n  };\n  return (\n    <List\n      className={Styles.SpaceList}\n      itemLayout='horizontal'\n      dataSource={issues}\n      split={false}\n      renderItem={SpaceListItem}\n    ></List>\n  );\n};\n","type ToGithubIssues = {\n  owner: string;\n  name: string;\n  index: number;\n};\nexport const toGithubIssues = ({ owner, name, index }: ToGithubIssues) => {\n  return `https://github.com/${owner}/${name}/issues/${index}`;\n};\n","import { useStores } from '@/hooks/user-stores';\nimport { Layout, message } from 'antd';\nimport { observer } from 'mobx-react';\nimport React from 'react';\nimport Styles from './Home.scss';\nimport { SpaceList } from './components/space-list/SpaceList';\nimport { useMount } from 'ahooks';\n\nconst Home = observer(() => {\n  const { userStore, issuesStore } = useStores();\n  useMount(() => {\n    window.addEventListener('scroll', onScrollNew);\n    issuesStore.getPageData();\n  });\n\n  const onScrollNew = () => {\n    const scrollHeight = document.documentElement.scrollHeight;\n    const scrollTop = document.documentElement.scrollTop;\n    const clientHeight = document.documentElement.clientHeight;\n    const isBottom = scrollTop + clientHeight > scrollHeight - 2;\n    if (isBottom && !issuesStore.loading) {\n      message.info('loading more');\n      getNewPage();\n    }\n  };\n  const getNewPage = async () => {\n    issuesStore.getNextPage();\n  };\n\n  return (\n    <Layout.Content className={Styles.Home}>\n      <SpaceList\n        issues={issuesStore.pageData}\n        repository={userStore.userRepository}\n      />\n    </Layout.Content>\n  );\n});\n\nexport default Home;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".Home__Home___16iR-{padding:20px;color:red}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/pages/home/Home.scss\"],\"names\":[],\"mappings\":\"AAAA,oBACE,YAAA,CACA,SAAA\",\"sourcesContent\":[\".Home {\\n  padding: 20px;\\n  color: red;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Home\": \"Home__Home___16iR-\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".SpaceList__SpaceList___3KnDT{width:100%}.SpaceList__SpaceList___3KnDT .SpaceList__SpaceCard___3VTmn div:nth-child(2){max-height:400px;overflow-y:scroll}.SpaceList__SpaceList___3KnDT .SpaceList__SpaceCard___3VTmn div:nth-child(2)::-webkit-scrollbar{display:none}.SpaceList__Footer___1-kLS{display:flex}.SpaceList__Footer___1-kLS>div:first-child{margin-left:10px}.SpaceList__Footer___1-kLS>div{padding:0px 10px}.SpaceList__CardMore___33rMq a{margin:0 5px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/pages/home/components/space-list/SpaceList.scss\"],\"names\":[],\"mappings\":\"AAAA,8BACE,UAAA,CAEE,6EACE,gBAAA,CACA,iBAAA,CACA,gGACE,YAAA,CAKR,2BACE,YAAA,CACA,2CACE,gBAAA,CAEF,+BACE,gBAAA,CAKF,+BACE,YAAA\",\"sourcesContent\":[\".SpaceList {\\n  width: 100%;\\n  .SpaceCard {\\n    div:nth-child(2) {\\n      max-height: 400px;\\n      overflow-y: scroll;\\n      &::-webkit-scrollbar {\\n        display: none;\\n      }\\n    }\\n  }\\n}\\n.Footer {\\n  display: flex;\\n  & > div:first-child {\\n    margin-left: 10px;\\n  }\\n  & > div {\\n    padding: 0px 10px;\\n  }\\n}\\n\\n.CardMore {\\n  a {\\n    margin: 0 5px;\\n  }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"SpaceList\": \"SpaceList__SpaceList___3KnDT\",\n\t\"SpaceCard\": \"SpaceList__SpaceCard___3VTmn\",\n\t\"Footer\": \"SpaceList__Footer___1-kLS\",\n\t\"CardMore\": \"SpaceList__CardMore___33rMq\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"sourceRoot":""}